{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/isaacphi/slop/internal/config/config-schema",
  "$ref": "#/$defs/ConfigSchema",
  "$defs": {
    "Agent": {
      "properties": {
        "autoApproveFunctions": {
          "type": "boolean",
          "description": "Automatically approve function calls",
          "default": true
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ConfigSchema": {
      "properties": {
        "modelPresets": {
          "additionalProperties": {
            "$ref": "#/$defs/ModelPreset"
          },
          "type": "object",
          "description": "Available model configurations"
        },
        "activeModel": {
          "type": "string",
          "description": "Currently selected model preset",
          "default": "claude"
        },
        "dbPath": {
          "type": "string",
          "description": "Path to the database file",
          "default": ".slop/slop.db"
        },
        "internal": {
          "$ref": "#/$defs/Internal",
          "description": "Internal configuration settings"
        },
        "mcpServers": {
          "additionalProperties": {
            "$ref": "#/$defs/MCPServer"
          },
          "type": "object",
          "description": "MCP server configurations"
        },
        "agent": {
          "$ref": "#/$defs/Agent",
          "description": "Agent behavior settings"
        },
        "log": {
          "$ref": "#/$defs/Log",
          "description": "Logging configuration"
        },
        "toolsets": {
          "additionalProperties": {
            "additionalProperties": {
              "$ref": "#/$defs/MCPServerToolConfig"
            },
            "type": "object"
          },
          "type": "object",
          "description": "Configurations for sets of MCP Servers and tools. Leave empty to allow all servers and all tools."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Internal": {
      "properties": {
        "model": {
          "type": "string",
          "description": "Default model to use for internal llm calls such as summaries",
          "default": "claude"
        },
        "summaryPrompt": {
          "type": "string",
          "description": "Prompt used for generating conversation summaries"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "Log": {
      "properties": {
        "logLevel": {
          "type": "string",
          "enum": [
            "DEBUG",
            "INFO",
            "WARN",
            "ERROR"
          ],
          "description": "Log level (DEBUG",
          "default": "INFO"
        },
        "logFile": {
          "type": "string",
          "description": "Log file path",
          "default": ""
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MCPServer": {
      "properties": {
        "command": {
          "type": "string",
          "description": "Command to run the MCP server"
        },
        "args": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Command line arguments for the MCP server"
        },
        "env": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object",
          "description": "Environment variables for the MCP server"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "MCPServerToolConfig": {
      "properties": {
        "requireApproval": {
          "type": "boolean",
          "description": "Whether tools need explicit approval",
          "default": true
        },
        "allowedTools": {
          "additionalProperties": {
            "$ref": "#/$defs/ToolConfig"
          },
          "type": "object",
          "description": "Configuration for allowed tools. Leave empty to allow all tools."
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ModelPreset": {
      "properties": {
        "provider": {
          "type": "string",
          "description": "The AI provider to use"
        },
        "name": {
          "type": "string",
          "description": "Model name for the provider"
        },
        "maxTokens": {
          "type": "integer",
          "description": "Maximum tokens to use in requests",
          "default": 1000
        },
        "temperature": {
          "type": "number",
          "description": "Temperature setting for the model",
          "default": 0.7
        },
        "toolsets": {
          "items": {
            "type": "string"
          },
          "type": "array",
          "description": "Toolsets to use for this model preset"
        }
      },
      "additionalProperties": false,
      "type": "object"
    },
    "ToolConfig": {
      "properties": {
        "requireApproval": {
          "type": "boolean",
          "description": "Whether tools need explicit approval",
          "default": true
        },
        "presetParameters": {
          "additionalProperties": {
            "type": "string"
          },
          "type": "object",
          "description": "Pre-configured parameters for this tool. Uses partial function application to send fewer parameters to the LLM."
        }
      },
      "additionalProperties": false,
      "type": "object"
    }
  },
  "title": "Slop Configuration Schema",
  "description": "Configuration schema for the Slop CLI tool"
}